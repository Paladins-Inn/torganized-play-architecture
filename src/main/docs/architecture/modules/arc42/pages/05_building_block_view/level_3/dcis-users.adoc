[[level3-dcis-users]]
= Level 3: dcis-users
(((SCS, dcis-users)))
(((dcis-users)))

include::partial$includes/all.adoc[]

[[uc-user-log-service]]
== Feature: User Log Service

.The UML flow for the user log entry service.
[plantuml,uc-user-log-entry,svg]
....
@startuml

start
if (User exists?) then (yes)
  :Write log to database;
  :Increase success counter;
else (no)
  :Write WARN to system log;
  :Increase error counter;
endif

end

@enduml
....

.The BDD test definition for the user log entry service.
[source,cucumber]
----
include::example$bdd/dcis-users/log-service.feature[]
----


[[uc-register-user]]
== Feature: Register a new user

.The UML flow for registering a new user
[plantiml,uc-user-registration,svg]
....
@startuml

start

if (User exists?) then (yes)
  if (User is banned or blocked) then (yes)
    :Write WARN to system log;
    :Reject registration;
    :Increase error counter;
    end
  else (no)
    if (User is deleted) then (yes)
      :Undelete the user;
    else (no)
    endif
  endif
else (no)
  :Write user to user database;
endif

:Write user registration to messaging topic;
:Increase success counter;
:Return user;

end

@enduml
....

.The BDD test definition for the user registration
[source,cucumber]
----
include::example$bdd/dcis-users/user-registration.feature[]
----